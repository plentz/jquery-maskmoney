/*

    jQuery Mask Money Plugin
    Original: https://github.com/plentz/jquery-maskmoney
    Fork: https://github.com/Dudu197/jquery-maskmoney

    MoneyMask functions works only for Brazilian style (thousands: '.' and decimal: ',')

*/
var MoneyMask={encode:function(a,b){b={prefix:"",suffix:"",affixesStay:!0,thousands:".",decimal:",",precision:2,allowZero:!1,allowNegative:!1};var f,g,h,c=a.indexOf("-")>-1&&b.allowNegative?"-":"",d=a.replace(/[^0-9]/g,""),e=d.slice(0,d.length-b.precision);return e=e.replace(/^0*/g,""),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,b.thousands),""===e&&(e="0"),f=c+e,b.precision>0&&(g=d.slice(d.length-b.precision),h=new Array(b.precision+1-g.length).join(0),f+=b.decimal+h+g),setSymbol(f)},decode:function(a){return Number($(this).val().replace(".","").replace(",",".")).toFixed(2)}};!function(a){"use strict";a.browser||(a.browser={},a.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),a.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),a.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),a.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var b={destroy:function(){return a(this).unbind(".maskMoney"),a.browser.msie&&(this.onpaste=null),this},mask:function(b){return this.each(function(){var c=a(this);return"number"==typeof b&&c.val(b),c.trigger("mask")})},unmasked:function(){return this.map(function(){var d,b=a(this).val()||"0",c=b.indexOf("-")!==-1;return a(b.split(/\D/).reverse()).each(function(a,b){if(b)return d=b,!1}),b=b.replace(/\D/g,""),b=b.replace(new RegExp(d+"$"),"."+d),c&&(b="-"+b),parseFloat(b)})},init:function(b){return b=a.extend({prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1},b),this.each(function(){function f(){var e,f,g,h,i,a=c.get(0),b=0,d=0;return"number"==typeof a.selectionStart&&"number"==typeof a.selectionEnd?(b=a.selectionStart,d=a.selectionEnd):(f=document.selection.createRange(),f&&f.parentElement()===a&&(h=a.value.length,e=a.value.replace(/\r\n/g,"\n"),g=a.createTextRange(),g.moveToBookmark(f.getBookmark()),i=a.createTextRange(),i.collapse(!1),g.compareEndPoints("StartToEnd",i)>-1?b=d=h:(b=-g.moveStart("character",-h),b+=e.slice(0,b).split("\n").length-1,g.compareEndPoints("EndToEnd",i)>-1?d=h:(d=-g.moveEnd("character",-h),d+=e.slice(0,d).split("\n").length-1)))),{start:b,end:d}}function g(){var a=!(c.val().length>=c.attr("maxlength")&&c.attr("maxlength")>=0),b=f(),d=b.start,e=b.end,g=!(b.start===b.end||!c.val().substring(d,e).match(/\d/)),h="0"===c.val().substring(0,1);return a||g||h}function h(a){c.each(function(b,c){if(c.setSelectionRange)c.focus(),c.setSelectionRange(a,a);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",a),d.moveStart("character",a),d.select()}})}function i(a){var b="";return a.indexOf("-")>-1&&(a=a.replace("-",""),b="-"),b+d.prefix+a+d.suffix}function j(a){var f,g,h,b=a.indexOf("-")>-1&&d.allowNegative?"-":"",c=a.replace(/[^0-9]/g,""),e=c.slice(0,c.length-d.precision);return e=e.replace(/^0*/g,""),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,d.thousands),""===e&&(e="0"),f=b+e,d.precision>0&&(g=c.slice(c.length-d.precision),h=new Array(d.precision+1-g.length).join(0),f+=d.decimal+h+g),i(f)}function k(a){var d,b=c.val().length;c.val(j(c.val())),d=c.val().length,a-=b-d,h(a)}function l(){var a=c.val();d.precision>0&&a.indexOf(d.decimal)<0&&(a+=d.decimal+new Array(d.precision+1).join(0)),c.val(j(a))}function m(){var a=c.val();return d.allowNegative?""!==a&&"-"===a.charAt(0)?a.replace("-",""):"-"+a:a}function n(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function o(b){b=b||window.event;var e,h,i,j,l,d=b.which||b.charCode||b.keyCode;return void 0!==d&&(d<48||d>57?45===d?(c.val(m()),!1):43===d?(c.val(c.val().replace("-","")),!1):13===d||9===d||(!(!a.browser.mozilla||37!==d&&39!==d||0!==b.charCode)||(n(b),!0)):!!g()&&(n(b),e=String.fromCharCode(d),h=f(),i=h.start,j=h.end,l=c.val(),c.val(l.substring(0,i)+e+l.substring(j,l.length)),k(i+1),!1))}function p(a){a=a||window.event;var e,g,h,i,j,b=a.which||a.charCode||a.keyCode;return void 0!==b&&(e=f(),g=e.start,h=e.end,8!==b&&46!==b&&63272!==b||(n(a),i=c.val(),g===h&&(8===b?""===d.suffix?g-=1:(j=i.split("").reverse().join("").search(/\d/),g=i.length-j-1,h=g+1):h+=1),c.val(i.substring(0,g)+i.substring(h,i.length)),k(g),!1))}function q(){e=c.val(),l();var b,a=c.get(0);a.createTextRange&&(b=a.createTextRange(),b.collapse(!1),b.select())}function r(){setTimeout(function(){l()},0)}function s(){var a=parseFloat("0")/Math.pow(10,d.precision);return a.toFixed(d.precision).replace(new RegExp("\\.","g"),d.decimal)}function t(b){if(a.browser.msie&&o(b),""===c.val()||c.val()===i(s()))d.allowZero?d.affixesStay?c.val(i(s())):c.val(s()):c.val("");else if(!d.affixesStay){var f=c.val().replace(d.prefix,"").replace(d.suffix,"");c.val(f)}c.val()!==e&&c.change()}function u(){var b,a=c.get(0);a.setSelectionRange?(b=c.val().length,a.setSelectionRange(b,b)):c.val(c.val())}var d,e,c=a(this);d=a.extend({},b),d=a.extend(d,c.data()),c.unbind(".maskMoney"),c.bind("keypress.maskMoney",o),c.bind("keydown.maskMoney",p),c.bind("blur.maskMoney",t),c.bind("focus.maskMoney",q),c.bind("click.maskMoney",u),c.bind("cut.maskMoney",r),c.bind("paste.maskMoney",r),c.bind("mask.maskMoney",l)})}};a.fn.maskMoney=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.maskMoney"):b.init.apply(this,arguments)}}(window.jQuery||window.Zepto);